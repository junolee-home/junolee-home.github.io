<!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <title>🐉 용비어천가(龍飛御天歌)</title>
                    <style>
:root { --primary-color: #007bff; --border-color: #dee2e6; --background-light: #f8f9fa; --correct-color: #28a745; --incorrect-color: #dc3545; --hover-color: #ff7a00; }
body { font-family: "Malgun Gothic", sans-serif; background-color: rgb(244, 247, 249); margin: 0px; padding: 20px; }
body.resizing { cursor: ns-resize; user-select: none; }
.container { display: flex; gap: 20px; }
.left-panel { width: 220px; display: flex; flex-direction: column; gap: 20px; position: sticky; top: 20px; align-self: flex-start; }
.editor-column { flex: 1 1 0%; display: flex; flex-direction: column; gap: 10px; }
.preview-column { flex: 1 1 0%; display: flex; flex-direction: column; background-color: white; border-radius: 8px; box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 5px; }
#editor-title-input { font-size: 2em; font-weight: bold; padding: 10px 5px; border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 2px solid var(--border-color); outline: none; background: transparent; font-family: inherit; }
#editor-title-input:focus { border-color: var(--primary-color); }
.preview-top-bar { display: flex; flex-direction: column; align-items: flex-start; gap: 8px; padding: 15px 25px 8px; background-color: var(--background-light); border-radius: 8px 8px 0px 0px; }
#preview-tab-bar { width: 100%; text-align: right; position: sticky; top: 0px; z-index: 10; background-color: var(--background-light); padding-bottom: 8px; border-bottom: 1px solid var(--border-color); }
#preview-main-title { font-size: 1.8em; font-weight: 600; margin: 0px; font-family: "Noto Sans KR"; }
.tab-bar { background: white; padding: 10px; border-radius: 8px 8px 0px 0px; box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 5px; border-bottom: 2px solid var(--primary-color); }
.tab-bar.preview-tabs { padding: 0px; margin: 0px; box-shadow: none; border-bottom: none; background-color: transparent; }
.tab-btn { padding: 8px 15px; border: 1px solid var(--border-color); background: rgb(255, 255, 255); border-radius: 5px; cursor: pointer; margin-right: 5px; font-size: 0.9em; }
.preview-tabs .tab-btn { border-top: none; border-right: none; border-left: none; border-image: initial; background: transparent; border-radius: 0px; padding: 0px 12px; margin: 0px; font-size: 0.95em; color: rgb(85, 85, 85); border-bottom: 2px solid transparent; transition: color 0.2s, border-color 0.2s; line-height: 2.5; }
.preview-tabs .tab-btn:hover { color: var(--hover-color); }
.tab-btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); font-weight: bold; }
.preview-tabs .tab-btn.active { background: transparent; color: var(--hover-color); border-bottom: 2px solid var(--hover-color); font-weight: bold; }
#add-tab-btn { background: var(--correct-color); color: white; border: none; }
#editor { border-radius: 0px 0px 8px 8px; background-color: white; padding: 20px; box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 5px; min-height: 80vh; margin-top: -8px; }
#preview { padding: 20px; }
#toolbar, #block-adder, #file-manager { background: white; padding: 15px; border-radius: 8px; box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 5px; }
#version-info { font-size: 0.8em; color: rgb(136, 136, 136); text-align: center; margin-top: 10px; }
#toolbar h4, #block-adder h4, #file-manager h4 { margin: 0px 0px 10px; font-size: 1em; }
.toolbar-group { margin-bottom: 15px; }
.toolbar-group button { border: 1px solid var(--border-color); background-color: rgb(255, 255, 255); cursor: pointer; padding: 5px; margin: 2px; border-radius: 4px; font-size: 1.1em; vertical-align: middle; min-width: 32px; }
.toolbar-group button:hover { background-color: rgb(226, 230, 234); }
.toolbar-group button svg, .toolbar-group button img { pointer-events: none; }
.color-swatch { width: 24px; height: 24px; }
#emoji-palette { display: flex; flex-wrap: wrap; gap: 5px; }
#emoji-palette span { cursor: pointer; font-size: 1.1em; padding: 2px; }
#block-adder { margin-top: 20px; }
.icon-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 3px; }
.icon-grid button { border: 1px solid var(--border-color); background-color: var(--background-light); cursor: pointer; padding: 8px; font-size: 1.2em; aspect-ratio: 1 / 1; border-radius: 4px; min-width: 0px; }
.icon-grid button:hover { background-color: rgb(226, 230, 234); }
.icon-grid button img { width: 60%; height: auto; }
#block-adder.disabled .icon-grid { opacity: 0.5; cursor: not-allowed; }
#editor .block, #preview .block { line-height: 1.7; transition: box-shadow 0.2s; }
#editor .block { position: relative; cursor: grab; border: 1px dashed var(--border-color); padding: 15px; margin-bottom: 15px; border-radius: 5px; background-color: var(--background-light); }
#editor .block.dragging { opacity: 0.5; border-style: solid; }
#editor .editable { cursor: text; background-color: rgb(255, 255, 255); border: 1px solid rgb(206, 212, 218); line-height: 1.8; padding: 5px 8px; }
#editor .block[data-type="spacer"] { position: relative; min-height: 30px; padding: 5px 15px 10px; text-align: center; }
.resize-handle { position: absolute; bottom: 0px; left: 0px; width: 100%; height: 10px; cursor: ns-resize; border-bottom: 3px solid rgba(0, 0, 0, 0.2); }
.resize-handle:hover { border-bottom-color: var(--primary-color); }
.block-controls { position: absolute; top: 5px; right: 5px; display: flex; gap: 4px; z-index: 5; }
.toggle-default-btn, .copy-block-btn, .delete-block-btn { background: transparent; border: none; font-size: 1.2em; cursor: pointer; opacity: 0.5; padding: 2px; }
.toggle-default-btn:hover { opacity: 1; color: rgb(255, 122, 0); }
.copy-block-btn:hover { opacity: 1; color: var(--primary-color); }
.delete-block-btn:hover { opacity: 1; color: var(--incorrect-color); }
.drag-handle { cursor: grab; touch-action: none; }
.drag-handle:active { cursor: grabbing; }
.block.copied { outline: 2px solid var(--primary-color); box-shadow: rgba(0, 123, 255, 0.5) 0px 0px 15px; }
.block-title { display: inline-flex; align-items: center; font-weight: bold; font-size: 0.9em; color: rgb(73, 80, 87); background-color: rgb(233, 236, 239); padding: 4px 12px; border-radius: 15px; margin-bottom: 15px; }
.text-content { margin-top: -10px; }
.block-title-text { display: inline-block; min-width: 30px; border-radius: 3px; padding: 0px 5px; outline: none; }
.block-title-text:focus { background-color: rgb(255, 255, 255); box-shadow: 0 0 0 1px var(--primary-color); }
.block[data-type="text"] .block-title { background-color: rgb(255, 249, 196); }
.block[data-type="ox"] .block-title { background-color: rgb(200, 230, 201); }
.block[data-type="mcq"] .block-title { background-color: rgb(187, 222, 251); }
.block[data-type="descriptive"] .block-title { background-color: rgb(209, 196, 233); }
.block[data-type="fill-in"] .block-title { background-color: rgb(255, 204, 188); }
.block[data-type="table"] .block-title { background-color: rgb(215, 204, 200); }
.block[data-type="math"] .block-title { background-color: rgb(178, 223, 219); }
.block[data-type="line-quiz"] .block-title { background-color: rgb(252, 228, 236); }
.block[data-type="youtube"] .block-title { background-color: rgb(255, 205, 210); }
.block[data-type="link"] .block-title { background-color: rgb(224, 247, 250); }
.block[data-type="frame"] .block-title { background-color: rgb(209, 196, 233); }
.block[data-type="summary"] .block-title { background-color: rgb(225, 245, 254); }
#editor .block[data-type="summary"] { border-width: 1px 1px 4px; border-style: solid; border-color: rgb(233, 236, 239) rgb(233, 236, 239) rgb(173, 181, 189); border-image: initial; background-color: rgb(248, 249, 250); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px; }
#editor .block[data-type="summary"] p { color: rgb(108, 117, 125); }
.youtube-url-input { width: 100%; padding: 8px; border: 1px solid rgb(204, 204, 204); border-radius: 4px; box-sizing: border-box; }
.youtube-placeholder { display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 20px; background-color: rgb(240, 240, 240); border: 1px dashed rgb(204, 204, 204); border-radius: 8px; cursor: pointer; text-align: center; transition: background-color 0.2s; }
.youtube-placeholder:hover { background-color: rgb(224, 224, 224); }
.youtube-placeholder-icon { width: 50px; height: auto; margin-bottom: 10px; }
.youtube-placeholder-text { font-weight: bold; color: rgb(51, 51, 51); }
.youtube-iframe-wrapper { position: relative; overflow: hidden; width: 100%; max-width: 640px; margin: 0px auto; padding-top: 56.25%; }
.youtube-iframe-wrapper iframe { position: absolute; inset: 0px; width: 100%; height: 100%; border: none; }
.youtube-close-btn { position: absolute; top: 5px; right: 5px; width: 28px; height: 28px; background: black; color: white; border: 2px solid white; border-radius: 50%; cursor: pointer; font-size: 16px; font-weight: bold; line-height: 24px; text-align: center; z-index: 10; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px; }
.link-editor-container, .frame-editor-container { display: flex; flex-direction: column; gap: 10px; }
.link-editor-row, .frame-editor-row { display: flex; align-items: center; gap: 8px; }
.link-editor-row > label:first-child, .frame-editor-row > label:first-child { font-weight: bold; flex-shrink: 0; width: 80px; }
.link-editor-row input[type="text"], .link-editor-row input[type="url"], .frame-editor-row input[type="text"], .frame-editor-row input[type="url"] { flex-grow: 1; padding: 6px; border: 1px solid rgb(204, 204, 204); border-radius: 4px; }
.link-target-options { display: flex; flex-wrap: wrap; gap: 5px 15px; align-items: center; }
.link-target-options label { white-space: nowrap; }
.preview-link-wrapper { display: inline-flex; align-items: center; gap: 10px; text-decoration: none; padding: 5px; }
.preview-link-label { font-weight: bold; color: rgb(73, 80, 87); background-color: rgb(224, 247, 250); padding: 6px 10px; border-radius: 15px; }
.preview-link-title { padding: 6px 12px; background-color: rgb(227, 242, 253); border-radius: 4px; color: rgb(0, 86, 179); font-weight: bold; transition: background-color 0.2s; }
.preview-link-wrapper:hover .preview-link-title { background-color: rgb(209, 231, 253); }
.frame-preview-container { border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 10px; background-color: rgb(255, 255, 255); }
.frame-preview-summary { display: flex; align-items: center; justify-content: space-between; padding: 8px; cursor: pointer; list-style: none; }
.frame-preview-summary::-webkit-details-marker { display: none; }
.frame-preview-title-pill { font-weight: bold; color: rgb(73, 80, 87); background-color: rgb(209, 196, 233); padding: 4px 12px; border-radius: 15px; }
.frame-preview-toggle-icon { transition: transform 0.2s; padding: 0px 10px; }
.frame-preview-container[open] .frame-preview-toggle-icon { transform: rotate(180deg); }
.frame-preview-content { padding: 15px; border-top: 1px solid var(--border-color); }
.frame-preview-content iframe { width: 100%; max-width: 100%; min-height: 450px; border: none; }
.frame-preview-content img { display: block; margin: 0px auto; border-radius: 4px; max-width: 100%; max-height: 600px; }
.frame-source-link { display: block; text-align: right; font-size: 0.8em; margin-top: 10px; color: rgb(108, 117, 125); }
.summary-preview-container { margin-bottom: 15px; background-color: rgb(248, 249, 250); border: 1px solid rgb(233, 236, 239); border-radius: 5px; }
.summary-preview-summary { display: flex; align-items: center; justify-content: space-between; padding: 8px 15px; cursor: pointer; list-style: none; }
.summary-preview-summary::-webkit-details-marker { display: none; }
.summary-preview-title-pill { font-weight: bold; color: rgb(73, 80, 87); background-color: rgb(225, 245, 254); padding: 4px 12px; border-radius: 15px; }
.summary-preview-toggle-icon { transition: transform 0.2s; padding: 0px 10px; }
.summary-preview-container[open] .summary-preview-toggle-icon { transform: rotate(180deg); }
.summary-preview-content { padding: 15px; color: rgb(108, 117, 125); }
.summary-preview-content ul { list-style-type: none; padding-left: 0px; margin: 0px; }
.summary-preview-content li { margin-bottom: 10px; }
.summary-preview-content strong { color: rgb(73, 80, 87); }
.youtube-title-editor { display: flex; gap: 8px; align-items: center; margin-bottom: 10px; }
.youtube-title-editor strong { flex-shrink: 0; }
.youtube-title-editor input { flex-grow: 1; padding: 6px; border: 1px solid rgb(204, 204, 204); border-radius: 4px; }
.youtube-preview-title { display: inline-flex; align-items: center; gap: 10px; }
.youtube-preview-title .pill { background-color: rgb(255, 205, 210); padding: 4px 12px; border-radius: 15px; display: inline-flex; align-items: center; font-weight: bold; }
.block[data-type="drag-drop"] .block-title { background-color: rgb(197, 225, 165); }
.drag-drop-item-editor { display: flex; align-items: center; gap: 5px; margin-bottom: 8px; background-color: rgb(255, 255, 255); padding: 8px; border-radius: 4px; }
.drag-drop-item-editor .editable { border: 1px solid rgb(224, 224, 224); padding: 5px; min-width: 50px; flex: 1 1 0%; }
.drag-drop-item-editor .drag-drop-answer { background-color: rgb(232, 245, 233); font-weight: bold; text-align: center; flex: 0 1 120px; }
.drag-drop-preview-container .sentence { margin-bottom: 10px; line-height: 2.2; padding: 10px; background: rgb(250, 250, 250); border-radius: 4px; }
.drag-drop-preview-container .drop-target { display: inline-block; width: 100px; height: 28px; border: 1px dashed rgb(173, 181, 189); background-color: rgb(233, 236, 239); vertical-align: middle; margin: 0px 5px; border-radius: 4px; text-align: center; line-height: 26px; font-weight: bold; }
.drag-drop-preview-container .drop-target.drag-over { background-color: rgb(209, 196, 233); border-style: solid; }
.drag-drop-preview-container .drop-target.correct { background-color: rgb(212, 237, 218); border-color: var(--correct-color); }
.drag-drop-preview-container .drop-target.incorrect { background-color: rgb(248, 215, 218); border-color: var(--incorrect-color); }
.drag-drop-preview-container .source-container { display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; border: 1px solid rgb(224, 224, 224); background-color: rgb(248, 249, 250); border-radius: 4px; min-height: 40px; }
.drag-drop-preview-container .drag-source { padding: 6px 14px; background-color: rgb(255, 255, 255); border: 1px solid rgb(204, 204, 204); border-radius: 15px; cursor: grab; user-select: none; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px; }
.drag-drop-preview-container .drag-source:active { cursor: grabbing; box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 5px; }
.drag-drop-preview-container .drag-source.dragging { opacity: 0.5; }
.block[data-type="ordering"] .block-title { background-color: rgb(255, 218, 185); }
.ordering-preview-container { padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; }
.ordering-target-container, .ordering-source-container { display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; border: 1px dashed rgb(173, 181, 189); border-radius: 4px; min-height: 50px; align-content: flex-start; }
.ordering-source-container { background-color: rgb(248, 249, 250); border-style: solid; }
.ordering-target-container.drag-over { background-color: rgb(224, 242, 241); border-color: var(--primary-color); }
.ordering-target-container.correct { border-color: var(--correct-color); background-color: rgb(232, 245, 233); }
.ordering-target-container.incorrect { border-color: var(--incorrect-color); background-color: rgb(255, 235, 238); }
.ordering-item { padding: 6px 14px; background-color: rgb(255, 255, 255); border: 1px solid rgb(204, 204, 204); border-radius: 15px; cursor: grab; user-select: none; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px; }
.ordering-item:active { cursor: grabbing; }
.ordering-item.dragging { opacity: 0.5; }
.ordering-drop-indicator { width: 4px; height: 30px; background-color: var(--hover-color); border-radius: 2px; align-self: center; }
.block-title-container { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.block-title-container .block-title { margin-bottom: 0px; }
.math-guide-link { font-size: 0.85em; color: var(--primary-color); text-decoration: none; border-bottom: 1px dashed var(--primary-color); padding-bottom: 1px; transition: 0.2s; }
.math-guide-link:hover { color: rgb(0, 86, 179); border-bottom-style: solid; }
#preview .block[data-type="text"]:not(.no-title-block) { background-color: transparent; border-color: transparent; padding: 0px; box-shadow: none; }
.text-preview-container { margin-bottom: 15px; background-color: rgb(248, 249, 250); border: 1px solid rgb(233, 236, 239); border-radius: 5px; }
.text-preview-summary { display: flex; align-items: center; justify-content: space-between; padding: 8px 15px; cursor: pointer; list-style: none; }
.text-preview-summary::-webkit-details-marker { display: none; }
.text-preview-title-pill { font-weight: bold; color: rgb(73, 80, 87); background-color: rgb(255, 249, 196); padding: 4px 12px; border-radius: 15px; display: inline-flex; align-items: center; }
.text-preview-toggle-icon { transition: transform 0.2s; padding: 0px 10px; }
.text-preview-container:not([open]) .text-preview-toggle-icon { transform: rotate(-90deg); }
.text-preview-content-wrapper { padding: 15px; background-color: transparent; border: none; }
.text-preview-content { background-color: rgb(255, 255, 255); border: 1px solid rgb(206, 212, 218); padding: 10px 12px; border-radius: 4px; line-height: 1.8; }
.explainable-in-editor { background-color: rgb(227, 242, 253); color: rgb(13, 71, 161); border-bottom: 1px dashed rgb(144, 202, 249); cursor: pointer; border-radius: 3px; padding: 1px 4px; }
.inline-link-from-text { background-color: rgb(227, 242, 253); border: 1px solid rgb(144, 202, 249); border-radius: 4px; padding: 2px 6px; text-decoration: none; color: rgb(13, 71, 161); transition: 0.2s; }
.inline-link-from-text:hover { background-color: rgb(187, 222, 251); border-color: rgb(66, 165, 245); color: rgb(0, 0, 0); }
.inline-image-from-text { max-width: 100%; max-height: 300px; border: 1px solid var(--border-color); border-radius: 4px; box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px; vertical-align: middle; margin: 2px 4px; }
#preview .block { border: 1px solid var(--border-color); padding: 15px; margin-bottom: 15px; border-radius: 5px; }
#preview .block.no-title-block { border-color: transparent; padding: 0px; margin-bottom: 0px; background-color: transparent; box-shadow: none; }
#preview .block-title { display: inline-flex; width: fit-content; }
.text-border-black { border: 1px solid black; padding: 0px 2px; border-radius: 3px; }
.text-border-red { border: 1px solid red; padding: 0px 2px; border-radius: 3px; }
.text-border-blue { border: 1px solid blue; padding: 0px 2px; border-radius: 3px; }
.text-border-green { border: 1px solid green; padding: 0px 2px; border-radius: 3px; }
.text-highlight-red { background-color: rgb(255, 235, 238); border: 2px solid rgb(229, 115, 115); padding: 1px 3px; border-radius: 3px; }
.text-highlight-yellow { background-color: rgb(255, 253, 231); border: 2px solid rgb(255, 241, 118); padding: 1px 3px; border-radius: 3px; }
.text-highlight-blue { background-color: rgb(227, 242, 253); border: 2px solid rgb(144, 202, 249); padding: 1px 3px; border-radius: 3px; }
.text-highlight-green { background-color: rgb(232, 245, 233); border: 2px solid rgb(165, 214, 167); padding: 1px 3px; border-radius: 3px; }
#preview .explainable { color: var(--primary-color); border-bottom: 2px dotted var(--primary-color); cursor: pointer; font-weight: bold; }
.ox-question-row { display: flex; justify-content: space-between; align-items: flex-start; gap: 15px; }
.ox-question-row .question-text { flex-grow: 1; }
.ox-choices { flex-shrink: 0; }
.quiz-title-container-editor, .ox-item-editor, .mcq-option-editor { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
.quiz-title-container-editor .editable, .ox-item-editor .editable, .mcq-option-editor .editable { flex-grow: 1; }
.ox-item-editor { border-top: 1px solid rgb(238, 238, 238); padding-top: 10px; }
.ox-item-editor:first-child { border-top: none; padding-top: 0px; }
.mcq-option-editor { margin-bottom: 5px; }
.descriptive-editor-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
.descriptive-editor-row strong { flex-shrink: 0; }
.descriptive-editor-row .editable { flex-grow: 1; }
.quiz-title-preview { font-size: 1.2em; font-weight: bold; margin-bottom: 15px; }
.retry-quiz-btn { font-size: 0.8em; margin-left: 10px; cursor: pointer; color: rgb(108, 117, 125); background: rgb(241, 241, 241); border: 1px solid rgb(221, 221, 221); padding: 5px 10px; border-radius: 4px; }
.mcq-options-preview { margin-left: 20px; }
.mcq-preview-option { cursor: pointer; padding: 8px; border-radius: 4px; }
.mcq-preview-option:hover { background-color: rgb(233, 236, 239); }
.quiz-controls { display: flex; justify-content: flex-end; align-items: center; gap: 10px; margin-top: 10px; }
.quiz-controls .feedback { margin: 0px; padding: 4px 8px; text-align: right; flex-grow: 1; }
.descriptive-student-answer { width: 100%; min-height: 60px; border: 1px solid var(--border-color); border-radius: 4px; padding: 8px; margin-top: 10px; box-sizing: border-box; }
.show-answer-btn, .hide-answer-btn, .check-fill-in-btn, .check-line-quiz-btn, .check-answer-btn { padding: 5px 10px; border: 1px solid var(--primary-color); background-color: var(--primary-color); color: white; border-radius: 4px; cursor: pointer; }
.fill-in-item-editor { padding: 10px; margin-bottom: 5px; border-radius: 4px; background: rgb(255, 255, 255); }
.fill-in-question-container { display: flex; align-items: center; gap: 8px; }
.fill-in-question.placeholder-active { color: rgb(136, 136, 136); }
.fill-in-answers-container { margin-left: 2em; margin-top: 5px; font-size: 0.9em; color: rgb(85, 85, 85); }
.fill-in-answer-wrapper { display: flex; align-items: center; gap: 5px; margin-bottom: 2px; }
.fill-in-answer-input { border: 1px solid rgb(204, 204, 204); border-radius: 3px; padding: 2px 4px; background-color: rgb(227, 242, 253); }
.fill-in-preview-item { margin-bottom: 15px; }
.blank-input-preview { min-width: 50px; border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1px solid rgb(51, 51, 51); text-align: center; font-family: inherit; font-size: 1em; }
.blank-input-preview.correct { background-color: rgb(212, 237, 218); border-color: var(--correct-color); }
.blank-input-preview.incorrect { background-color: rgb(248, 215, 218); border-color: var(--incorrect-color); }
.table-editor-container > div:not(.table-records-container) { margin-bottom: 15px; }
.table-title-editor, .table-desc-editor { display: flex; gap: 8px; align-items: center; }
.table-title-editor .editable, .table-desc-editor .editable { flex-grow: 1; }
.fields-container { display: flex; gap: 5px; }
.table-field { flex: 1 1 0%; font-weight: bold; text-align: center; }
.table-record-row-wrapper { margin-bottom: 5px; padding-bottom: 5px; border-bottom: 1px solid rgb(238, 238, 238); }
.table-record-row { display: flex; gap: 5px; }
.table-record-cell { flex: 1 1 0%; }
.add-table-row-btn { width: 100%; padding: 8px; margin-top: 10px; }
.table-preview-container table { width: 100%; border-collapse: collapse; margin-top: 10px; table-layout: fixed; }
.table-preview-container th, .table-preview-container td { border: 1px solid var(--border-color); padding: 8px; text-align: left; word-break: break-all; vertical-align: top; }
.table-preview-container th:first-child, .table-preview-container td:first-child { width: 120px; }
.table-preview-container thead { background-color: var(--background-light); }
.table-preview-container h3 { margin-bottom: 5px; }
.table-preview-container p { margin-top: 0px; font-size: 0.9em; color: rgb(102, 102, 102); }
.math-editor-field { background-color: rgb(255, 255, 255); border: 1px solid var(--border-color); padding: 10px; border-radius: 4px; min-height: 40px; }
.math-editor-field.mq-focused { border-color: var(--primary-color); box-shadow: 0 0 0 1px var(--primary-color); }
.math-preview-field { padding: 10px; text-align: center; font-size: 1.2em; overflow-x: auto; }
.line-quiz-item-editor { display: flex; align-items: stretch; gap: 10px; margin-bottom: 5px; }
.line-quiz-item-editor .editable { flex: 1 1 0%; }
.line-quiz-item-editor > * { display: flex; align-items: center; }
.line-quiz-preview { position: relative; display: flex; justify-content: space-between; }
.line-quiz-column { display: flex; flex-direction: column; gap: 10px; width: 45%; }
.line-quiz-canvas { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; pointer-events: none; }
.line-quiz-item { display: flex; align-items: center; padding: 8px; background-color: rgb(248, 249, 250); border: 1px solid rgb(222, 226, 230); border-radius: 5px; min-height: 36px; }
.line-quiz-item .text { flex-grow: 1; }
.line-quiz-item .dot { flex-shrink: 0; width: 16px; height: 16px; background-color: rgb(204, 204, 204); border-radius: 50%; cursor: pointer; border: 2px solid white; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 3px; }
.line-quiz-item .dot:hover { background-color: rgb(170, 170, 170); }
.line-quiz-item .dot.selected { background-color: var(--primary-color); }
.line-quiz-item .dot.disabled { cursor: default; }
.feedback { margin-top: 5px; padding: 4px 8px; border-radius: 4px; font-weight: bold; text-align: center; display: none; }
.feedback.show { display: block; }
.feedback.correct { color: var(--correct-color); }
.feedback.incorrect { color: var(--incorrect-color); }
.feedback .correct-highlight { background-color: var(--correct-color); color: white; padding: 2px 6px; border-radius: 4px; }
.feedback .incorrect-highlight { background-color: var(--incorrect-color); color: white; padding: 2px 6px; border-radius: 4px; }
.explanation { background: rgb(255, 251, 230); border: 1px solid rgb(255, 229, 143); padding: 10px; margin-top: 10px; border-radius: 5px; display: none; }
.explanation.show { display: block; }
.explanation-popup { position: absolute; background-color: rgb(255, 251, 230); color: rgb(93, 64, 55); border: 1px solid rgb(255, 229, 143); border-radius: 8px; padding: 12px 30px 12px 18px; z-index: 1000; box-shadow: rgba(0, 0, 0, 0.15) 0px 4px 12px; max-width: 300px; font-size: 0.9em; white-space: pre-wrap; display: none; opacity: 0; transform: translateY(10px) scale(0.95); transition: opacity 0.2s, transform 0.2s; }
.explanation-popup.show { display: block; opacity: 1; transform: translateY(0px) scale(1); }
.explanation-popup::before { content: ""; position: absolute; bottom: 100%; left: 20px; border-width: 9px; border-style: solid; border-color: transparent transparent rgb(255, 229, 143); border-image: initial; }
.explanation-popup::after { content: ""; position: absolute; bottom: 100%; left: 21px; border-width: 8px; border-style: solid; border-color: transparent transparent rgb(255, 251, 230); border-image: initial; }
.popup-close-btn { position: absolute; top: 2px; right: 5px; background: transparent; border: none; font-size: 1.5em; line-height: 1; color: rgb(192, 192, 192); cursor: pointer; transition: color 0.2s; }
.popup-close-btn:hover { color: rgb(93, 64, 55); }
.explanation-modal-header { padding: 15px 25px; background-color: rgb(248, 249, 250); border-bottom: 1px solid rgb(238, 238, 238); border-radius: 8px 8px 0px 0px; }
.explanation-modal-header .selected-text-display { color: rgb(108, 117, 125); font-weight: normal; }
.mini-toolbar { margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid rgb(238, 238, 238); }
.mini-toolbar button { border: 1px solid var(--border-color); background-color: rgb(255, 255, 255); cursor: pointer; padding: 5px; margin: 2px; border-radius: 4px; font-size: 1em; vertical-align: middle; min-width: 32px; }
.mini-toolbar button:hover { background-color: rgb(226, 230, 234); }
#explanation-emoji-palette { padding-bottom: 10px; border-bottom: 1px solid rgb(238, 238, 238); margin-bottom: 10px; }
.modal-emoji { cursor: pointer; font-size: 1.4em; margin-right: 8px; opacity: 0.7; transition: opacity 0.2s; }
.modal-emoji:hover { opacity: 1; }
.editor-column .tab-btn { position: relative; padding-right: 28px; }
.editor-column .tab-btn .delete-tab-btn { position: absolute; top: 50%; right: 8px; transform: translateY(-50%); font-size: 1.1em; line-height: 1; opacity: 0.3; transition: opacity 0.2s; }
.editor-column .tab-btn:hover .delete-tab-btn { opacity: 1; }
.editor-column .tab-btn .delete-tab-btn:hover { color: var(--incorrect-color); font-weight: bold; }
.editor-column .tab-btn.dragging { opacity: 0.5; background: rgb(226, 230, 234); }
.exported-body .tab-content { display: none; }
.exported-body .tab-content.active { display: block; }
.CtxtMenu_InfoClose { top: 0.2em; right: 0.2em; }
.CtxtMenu_InfoContent { overflow: auto; text-align: left; font-size: 80%; padding: 0.4em 0.6em; border: 1px inset; margin: 1em 0px; max-height: 20em; max-width: 30em; background-color: rgb(238, 238, 238); white-space: normal; }
.CtxtMenu_Info.CtxtMenu_MousePost { outline: none; }
.CtxtMenu_Info { position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: rgb(221, 221, 221); color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
.CtxtMenu_MenuClose { position: absolute; cursor: pointer; display: inline-block; border: 2px solid rgb(170, 170, 170); border-radius: 18px; font-family: "Courier New", Courier; font-size: 24px; color: rgb(240, 240, 240); }
.CtxtMenu_MenuClose span { display: block; background-color: rgb(170, 170, 170); border: 1.5px solid; border-radius: 18px; line-height: 0; padding: 8px 0px 6px; }
.CtxtMenu_MenuClose:hover { color: white !important; border: 2px solid rgb(204, 204, 204) !important; }
.CtxtMenu_MenuClose:hover span { background-color: rgb(204, 204, 204) !important; }
.CtxtMenu_MenuClose:hover:focus { outline: none; }
.CtxtMenu_Menu { position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid rgb(204, 204, 204); margin: 0px; cursor: default; font-style: ; font-variant: normal; font-weight: ; font-stretch: ; font-size: ; font-family: ; font-optical-sizing: ; font-size-adjust: ; font-kerning: ; font-feature-settings: ; font-variation-settings: ; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
.CtxtMenu_MenuItem { padding: 1px 2em; background: transparent; }
.CtxtMenu_MenuArrow { position: absolute; right: 0.5em; padding-top: 0.25em; color: rgb(102, 102, 102); font-family: null; font-size: 0.75em; }
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow { color: white; }
.CtxtMenu_MenuArrow.CtxtMenu_RTL { left: 0.5em; right: auto; }
.CtxtMenu_MenuCheck { position: absolute; left: 0.7em; font-family: null; }
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right: 0.7em; left: auto; }
.CtxtMenu_MenuRadioCheck { position: absolute; left: 0.7em; }
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL { right: 0.7em; left: auto; }
.CtxtMenu_MenuInputBox { padding-left: 1em; right: 0.5em; color: rgb(102, 102, 102); font-family: null; }
.CtxtMenu_MenuInputBox.CtxtMenu_RTL { left: 0.1em; }
.CtxtMenu_MenuComboBox { left: 0.1em; padding-bottom: 0.5em; }
.CtxtMenu_MenuSlider { left: 0.1em; }
.CtxtMenu_SliderValue { position: absolute; right: 0.1em; padding-top: 0.25em; color: rgb(51, 51, 51); font-size: 0.75em; }
.CtxtMenu_SliderBar { outline: none; background: rgb(211, 211, 211); }
.CtxtMenu_MenuLabel { padding: 1px 2em 3px 1.33em; font-style: italic; }
.CtxtMenu_MenuRule { border-top: 1px solid rgb(221, 221, 221); margin: 4px 3px; }
.CtxtMenu_MenuDisabled { color: graytext; }
.CtxtMenu_MenuActive { background-color: rgb(96, 104, 114); color: white; }
.CtxtMenu_MenuDisabled:focus { background-color: rgb(232, 232, 232); }
.CtxtMenu_MenuLabel:focus { background-color: rgb(232, 232, 232); }
.CtxtMenu_ContextMenu:focus { outline: none; }
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus { outline: none; }
.CtxtMenu_SelectionMenu { position: relative; float: left; border-bottom: none; box-shadow: none; border-radius: 0px; }
.CtxtMenu_SelectionItem { padding-right: 1em; }
.CtxtMenu_Selection { right: 40%; width: 50%; }
.CtxtMenu_SelectionBox { padding: 0em; max-height: 20em; max-width: none; background-color: rgb(255, 255, 255); }
.CtxtMenu_SelectionDivider { clear: both; border-top: 2px solid rgb(0, 0, 0); }
.CtxtMenu_Menu .CtxtMenu_MenuClose { top: -10px; left: -10px; }
mjx-container[jax="SVG"] { direction: ltr; }
mjx-container[jax="SVG"] > svg { overflow: visible; min-height: 1px; min-width: 1px; }
mjx-container[jax="SVG"] > svg a { fill: blue; stroke: blue; }
mjx-assistive-mml { top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); user-select: none; position: absolute !important; padding: 1px 0px 0px !important; border: 0px !important; display: block !important; width: auto !important; overflow: hidden !important; }
mjx-assistive-mml[display="block"] { width: 100% !important; }
mjx-container[jax="SVG"][display="true"] { display: block; text-align: center; margin: 1em 0px; }
mjx-container[jax="SVG"][display="true"][width="full"] { display: flex; }
mjx-container[jax="SVG"][justify="left"] { text-align: left; }
mjx-container[jax="SVG"][justify="right"] { text-align: right; }
g[data-mml-node="merror"] > g { fill: red; stroke: red; }
g[data-mml-node="merror"] > rect[data-background] { fill: yellow; stroke: none; }
g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] { stroke-width: 70px; fill: none; }
g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] { stroke-width: 70px; fill: none; }
g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed { stroke-dasharray: 140; }
g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted { stroke-linecap: round; stroke-dasharray: 0, 140; }
g[data-mml-node="mtable"] > g > svg { overflow: visible; }
[jax="SVG"] mjx-tool { display: inline-block; position: relative; width: 0px; height: 0px; }
[jax="SVG"] mjx-tool > mjx-tip { position: absolute; top: 0px; left: 0px; }
mjx-tool > mjx-tip { display: inline-block; padding: 0.2em; border: 1px solid rgb(136, 136, 136); font-size: 70%; background-color: rgb(248, 248, 248); color: black; box-shadow: rgb(170, 170, 170) 2px 2px 5px; }
g[data-mml-node="maction"][data-toggle] { cursor: pointer; }
mjx-status { display: block; position: fixed; left: 1em; bottom: 1em; min-width: 25%; padding: 0.2em 0.4em; border: 1px solid rgb(136, 136, 136); font-size: 90%; background-color: rgb(248, 248, 248); color: black; }
foreignobject[data-mjx-xml] { font-family: initial; line-height: normal; overflow: visible; }
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] { stroke-width: 3; }</style>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js"></script>
                    <script>
                        window.MathJax = {
                          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
                          svg: { fontCache: 'global' }
                        };
                    </script>
                    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
                </head>
                <body class="exported-body" style="background-color: #f4f7f9; font-family: 'Malgun Gothic', sans-serif;">
                    <div style="max-width: 800px; margin: 20px auto; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        
                <div class="preview-top-bar">
                    <h1 id="preview-main-title">🐉 용비어천가(龍飛御天歌)</h1>
                </div>
                <div id="preview-tab-bar" class="tab-bar preview-tabs">
                    <div id="preview-tab-buttons"><button class="tab-btn active" data-tab-id="tab-1757895256128">개념이해</button><button class="tab-btn " data-tab-id="tab-1757909615127">본문</button><button class="tab-btn " data-tab-id="tab-1758327017361">형성평가</button></div>
                </div>
                <div id="preview"><div class="tab-content active" data-tab-content-id="tab-1757895256128"><h2 style="display:none;">개념이해</h2><div class="block" data-type="text"><details class="text-preview-container" open="">
                                <summary class="text-preview-summary">
                                    <span class="text-preview-title-pill">📝 조선의 건국을 노래한 장엄한 서사시, 악장(樂章)</span>
                                    <span class="text-preview-toggle-icon">▼</span>
                                </summary>
                                <div class="text-preview-content-wrapper">
                                    <div class="text-preview-content"><div>📍 악장은 쉽게 말해 조선이라는&nbsp;<b>새로운 나라의 건국을 축하</b>하고, 그&nbsp;<b>정당성을 널리 알리기 위해 만들어진</b>&nbsp;'<span style="background-color: rgb(255, 250, 205);"><b>국가 공식 찬가</b></span>'입니다. 주로 국가의 중요한 제사나 큰 연회에서 음악에 맞추어 불렸습니다.</div><div><br></div><div>📍&nbsp;<b>꼭 알아야 할 대표 작품</b>: 『용비어천가』,&nbsp; 『월인천강지곡』</div><div><br></div><div style="text-align: right;"><a href="https://www.youtube.com/watch?v=88-55PsjMMQ" target="_blank" class="inline-link-from-text">📒 KBS News | 궁중 예술로 다시 태어난 ‘용비어천가’</a></div><div style="text-align: right;"><br></div></div>
                                </div>
                            </details></div><div class="block" data-type="text"><details class="text-preview-container" open="">
                                <summary class="text-preview-summary">
                                    <span class="text-preview-title-pill">📝 용비어천가 해설</span>
                                    <span class="text-preview-toggle-icon">▼</span>
                                </summary>
                                <div class="text-preview-content-wrapper">
                                    <div class="text-preview-content"><div>*️⃣ <b>제재 해설</b></div><div>왕명에 따라 <b>정인지, 권제, 안지 등</b>이 지은 것으로 <b>세종 27년(1445년)에 편찬</b>되어 <b>세종 29년(1447)에 간행</b>된 악장 문학 작품이다. <span style="background-color: rgb(255, 214, 214);">조선을 세우기까지의 선조들의 공덕</span>을 기리고 <span style="background-color: rgb(255, 214, 214);">조선 개국의 정당성</span>을 밝히고 있다.</div><div><br></div><div>*️⃣ 창작 동기</div><div>&nbsp; ▪️새 왕조의 정당성 부각</div><div>&nbsp; ▪️후대 왕에 대한 권계</div><div><div>&nbsp; ▪️훈민정음의 실용성 시험</div></div><div><br></div></div>
                                </div>
                            </details></div><div class="block" data-type="youtube"><div class="block-title youtube-preview-title">
                                        <span class="pill">🎬 </span>
                                        <span>선을 넘는 녀석들: 훈민정음으로 만들어진 최초의 책</span>
                                    </div><div class="youtube-placeholder" data-video-id="aeFu6-a8H3w">
                                🎬
                                <div class="youtube-placeholder-text">클릭하여 영상 보기</div>
                            </div></div><div style="height: 140px;"></div><div class="block" data-type="ox"><div class="block-title">⭕ OX 퀴즈</div><div class="quiz-container"><div class="quiz-title-preview">다음 물음에 답하시오.</div><div class="ox-preview-item">
                                        <div class="ox-question-row">
                                        <div class="question-text"><strong>Q1.</strong> 악장은 서사시에 해당한다.</div>
                                        <div class="ox-choices" data-answer="O"><button data-choice="O">O</button><button data-choice="X">X</button></div>
                                        </div>
                                        <div class="feedback"></div>
                                    </div><div class="ox-preview-item">
                                        <div class="ox-question-row">
                                        <div class="question-text"><strong>Q2.</strong> 악장은 '새로운 나라의 건국을 축하하고, 그 정당성을 널리 알리기 위해' 만들어진 '사적인 찬가'이다</div>
                                        <div class="ox-choices" data-answer="X"><button data-choice="O">O</button><button data-choice="X">X</button></div>
                                        </div>
                                        <div class="feedback"></div>
                                    </div><div class="ox-preview-item">
                                        <div class="ox-question-row">
                                        <div class="question-text"><strong>Q3.</strong> 악장의 대표작으로 '용비어천가'와 '월인천강지곡', '훈민정음'을 들 수 있다.</div>
                                        <div class="ox-choices" data-answer="X"><button data-choice="O">O</button><button data-choice="X">X</button></div>
                                        </div>
                                        <div class="feedback"></div>
                                    </div><div class="ox-preview-item">
                                        <div class="ox-question-row">
                                        <div class="question-text"><strong>Q4.</strong> 용비어천가는 조선을 세우기까지의 선조들의 공덕을 기리고 조선 개국의 정당성을 밝히고 있는 악장이다.</div>
                                        <div class="ox-choices" data-answer="O"><button data-choice="O">O</button><button data-choice="X">X</button></div>
                                        </div>
                                        <div class="feedback"></div>
                                    </div><div class="quiz-controls"><button class="retry-quiz-btn">다시 풀기</button></div></div></div><div class="block" data-type="mcq"><div class="block-title">🔢 객관식</div><div class="mcq-preview-item" data-attempts="0" data-answer="2" data-explanation="JUVDJTlBJUE5JUVCJUI5JTg0JUVDJTk2JUI0JUVDJUIyJTlDJUVBJUIwJTgwJTIwJUVDJUIwJUJEJUVDJTlFJTkxJTIwJUVCJThGJTk5JUVBJUI4JUIwJTNDYnIlM0UlMjZuYnNwJTNCJTIwLSVFQyU4MyU4OCUyMCVFQyU5OSU5NSVFQyVBMSVCMCVFQyU5RCU5OCUyMCVFQyVBMCU5NSVFQiU4QiVCOSVFQyU4NCVCMSUyMCVFQiVCNiU4MCVFQSVCMCU4MSUzQ2RpdiUzRSUyNm5ic3AlM0IlMjAtJTIwJUVEJTlCJTg0JUVCJThDJTgwJTIwJUVDJTk5JTk1JUVDJTk3JTkwJTIwJUVCJThDJTgwJUVEJTk1JTlDJTIwJUVBJUI2JThDJUVBJUIzJTg0JTNDJTJGZGl2JTNFJTNDZGl2JTNFJTI2bmJzcCUzQiUyMC0lMjAlRUQlOUIlODglRUIlQUYlQkMlRUMlQTAlOTUlRUMlOUQlOEMlRUMlOUQlOTglMjAlRUMlOEIlQTQlRUMlOUElQTklRUMlODQlQjElMjAlRUMlOEIlOUMlRUQlOTclOTglM0MlMkZkaXYlM0U="><p><strong>Q.</strong> 다음 중 『용비어천가』의 창작 동기가 <u>아닌</u> 것은?</p><div class="mcq-options-preview"><div class="mcq-preview-option" data-choice="1">① 새 왕조의 정당성 부각</div><div class="mcq-preview-option" data-choice="2">② 중국에 의존하는 사대주의 비판</div><div class="mcq-preview-option" data-choice="3">③ 후대 왕에 대한 권계</div><div class="mcq-preview-option" data-choice="4">④ 훈민정음의 실용성 시험</div></div>
                            <div class="quiz-controls">
                                <span class="feedback"></span>
                                <button class="retry-quiz-btn">다시 풀기</button>
                            </div>
                            <div class="explanation"></div>
                            </div></div></div><div class="tab-content " data-tab-content-id="tab-1757909615127"><h2 style="display:none;">본문</h2><div class="block" data-type="text"><details class="text-preview-container">
                                <summary class="text-preview-summary">
                                    <span class="text-preview-title-pill">📝 용비어천가 교과서 지문</span>
                                    <span class="text-preview-toggle-icon">▼</span>
                                </summary>
                                <div class="text-preview-content-wrapper">
                                    <div class="text-preview-content"><div><b>용비어천가(龍飛御天歌)</b></div><div><br></div><div>海東(해동) 六龍(육룡)•이 ᄂᆞᄅᆞ•샤 ：일：마다 天福(천복) •이시•니 古聖(고성)•이 同符(동부)•ᄒᆞ시•니&nbsp;</div><div style="text-align: right;">&lt;제1장&gt;</div><div style="text-align: right;"><br></div><div>불•휘 기•픈 남•ᄀᆞᆫ ᄇᆞᄅᆞ•매 아•니 ：뮐•ᄊᆡ 곶 ：됴•코 여•름 •하ᄂᆞ•니</div><div>：ᄉᆡ•미 기•픈 •므•른 •ᄀᆞᄆᆞ•래 아•니 그•츨•ᄊᆡ ：내•히 이•러 바•ᄅᆞ•래 •가ᄂᆞ•니&nbsp;</div><div style="text-align: right;">&lt;제2장&gt;</div><div style="text-align: right;"><br></div><div><b>&lt;현대어 풀이&gt;</b></div><div><br></div><div>&lt;제1장&gt;</div><div>해동의 여섯 용이 나시어, 일마다 하늘의 복이시니 옛날의 성인과 서로 꼭 들어맞으시니.</div><div><br></div><div>&lt;제2장&gt;</div><div>뿌리가 깊은 나무는 바람에 아니 움직이므로, 꽃 좋고 열매 많으니.</div><div>샘이 깊은 물은 가뭄에 아니 그치므로, 내가 이루어져 바다에 가느니.</div></div>
                                </div>
                            </details></div><div style="height: 48px;"></div><div class="block" data-type="text"><details class="text-preview-container" open="">
                                <summary class="text-preview-summary">
                                    <span class="text-preview-title-pill">📝 용비어천가 구절풀이</span>
                                    <span class="text-preview-toggle-icon">▼</span>
                                </summary>
                                <div class="text-preview-content-wrapper">
                                    <div class="text-preview-content"><div style="text-align: center;"><span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium; text-align: center;&quot;&gt;💬 용이 날아올라 하늘을 다스림을 노래한다는 뜻.&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium; text-align: center;&quot;&gt;💡&lt;b&gt;용비어천가의 '용'?&lt;/b&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium; text-align: center;&quot;&gt;&amp;nbsp; &amp;nbsp;조선을 건국한 태조 이성계를 비롯한 세종의 여섯 선조를 상징.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium; text-align: center;&quot;&gt;&amp;nbsp; &amp;nbsp;목조-익조-도조-환조-태조 이성계-태종 이방원&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;">용비어천가(龍飛御天歌)</span>​</div><div style="text-align: center;"><br></div><div>1️⃣</div><div><span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 발해의 동쪽이라는 뜻으로, 예전에 우리나라를 이르던 말.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡우리 나라 별칭: 동국, 근역(무궁화 지역), 청구(푸른 언덕)&lt;/span&gt;&lt;/div&gt;">海東(해동)</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 당시 임금인 세종의 여섯 조상을 가리켜 한 말.&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡 목조&amp;gt;익조&amp;gt;도조&amp;gt;환조&amp;gt;태조 이성계 &amp;gt; 태종 이방원&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;📍이: 주격 조사.&amp;nbsp; (자음 + &lt;span style=&quot;background-color: rgb(255, 250, 205);&quot;&gt;이&lt;/span&gt;)&amp;nbsp;&lt;/span&gt;&lt;/div&gt;">六龍(육룡)•이</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 ᄂᆞᆯ-+-ᄋᆞ-+-샤-+-아&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;🔸-샤-: 주체 높임 선어말 어미. (💡 '-샤-' + 모음)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;🔸-아: 어말 어미&lt;/span&gt;&lt;/div&gt;">ᄂᆞᄅᆞ•샤</span>​&nbsp; ：일：마다&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 하늘의 복&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡조선 왕조의 창업이 &lt;span style=&quot;background-color: rgb(255, 214, 214);&quot;&gt;하늘의 뜻&lt;/span&gt;에 의한 역사적 순리라는 점을 주장하여 ①&amp;nbsp;&lt;span style=&quot;background-color: rgb(210, 234, 255);&quot;&gt;사대부들의 충성심을 자극&lt;/span&gt;하고&amp;nbsp; ②&amp;nbsp;&lt;span style=&quot;background-color: rgb(210, 234, 255);&quot;&gt;민심의 이반을 막고자 함&lt;/span&gt;.&amp;nbsp; &amp;nbsp;➡️ 새 왕조의 정당성 부각&lt;/span&gt;&lt;/div&gt;">天福(천복</span>​) •이시•니&nbsp;</div><div><br></div><div><span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 중국의 옛 성인인 제왕&lt;/span&gt;&lt;b style=&quot;font-size: medium;&quot;&gt;과&lt;/b&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡육조의 위대함을 중국 제왕들의 사적과 일치시켜 조선 건국의 정당성을 강조함.&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡 중국 고사 활용&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;📌 이: 비교 부사격 조사. (~과/와)&amp;nbsp;&lt;/span&gt;&lt;/div&gt;">古聖(고성)•이</span>​&nbsp;&nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬부신(符信)이 꼭 들어맞듯 사물이나 현상이 서로 꼭 들어맞다.&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡중국 고성(古聖)의 사적 = 육조六祖의 사적&lt;/span&gt;&lt;/div&gt;">同符(동부)</span>​•ᄒᆞ시•니&nbsp;</div><div style="text-align: right;">&lt;제1장&gt;</div><div style="text-align: right;"><br></div><div><div><span style="background-color: rgb(255, 250, 205);"><b>현대어 풀이</b></span></div><div>해동의 여섯 용이 나시어, 일마다 하늘의 복이시니&nbsp;</div><div>옛날의 성인과 서로 꼭 들어맞으시니.</div></div><div><br></div><div style="text-align: center;"><img src="https://junolee-home.github.io/images/부신.png" class="inline-image-from-text" alt="사용자 삽입 이미지"></div><div style="text-align: center;">참고 이미지(부신/AI로 상상하여 제작)</div><div style="text-align: center;"><br></div><div style="text-align: center;"><br></div><div><br></div><div>2️⃣</div><div><span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 뿌리가&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡 불휘(뿌리) + ∅(주격 조사)&lt;/span&gt;&lt;/div&gt;">불•휘</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;br&gt;">기•픈</span>​&nbsp;<span style="text-align: center;">&nbsp;</span>&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 나무는&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡남ㄱ(나모) + ᄋᆞᆫ&lt;/span&gt;&lt;/div&gt;">남•ᄀᆞᆫ</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="💬바람에&lt;div&gt;💡애&lt;font size=&quot;3&quot;&gt;: 부사격 조사&lt;/font&gt;&lt;/div&gt;">ᄇᆞᄅᆞ•매</span>​&nbsp; &nbsp; 아•니&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 움직이므로&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡뮈다: 움직이다&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡뮈-+-ㄹᄊ(이유)&lt;/span&gt;&lt;/div&gt;">：뮐•ᄊᆡ</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="💬꽃&lt;div&gt;✨ 종성으로 'ㅈ' 사용하였음. '종성부용초성'의 모습을 보임.&lt;/div&gt;">곶</span>​&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 좋고&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡 (중세 국어에서)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&amp;nbsp; &amp;nbsp;① 둏다: 좋다(好)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&amp;nbsp; &amp;nbsp;② 좋다: 깨끗하(淨)&lt;/span&gt;&lt;/div&gt;">：됴•코</span>​&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 열매&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡열-(어근)+-음(명사형 파생 접미사)&lt;/span&gt;&lt;/div&gt;">여•름</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 많으니&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡(중세 국어에서)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&amp;nbsp; &amp;nbsp; ▪️하다: 많다(多)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&amp;nbsp; &amp;nbsp; ▪️ᄒᆞ다: ~을 하다(爲)&lt;/span&gt;&lt;/div&gt;">•하ᄂᆞ•니</span>​</div><div><span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 ᄉᆡᆷ+이(주격 조사)&lt;/span&gt;">：ᄉᆡ•미&nbsp;</span>​&nbsp; &nbsp;기•픈&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬믈+은&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡믈 &amp;gt; 물 (원순모음화)&lt;/span&gt;&lt;/div&gt;">•므•른</span>​&nbsp; &nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬가뭄에&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡ᄀᆞᄆᆞᆯ+애(부사격 조사)&lt;/span&gt;&lt;/div&gt;">•ᄀᆞᄆᆞ•래</span>​&nbsp; &nbsp;아•니&nbsp; &nbsp;그•츨•ᄊᆡ&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 내가&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡내ㅎ+이(주격 조사)&lt;/span&gt;&lt;/div&gt;">：내•히</span>​&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬이루어져&lt;/span&gt;">이•러</span>​&nbsp; &nbsp;&nbsp;<span class="explainable" data-explanation="&lt;span style=&quot;font-size: medium;&quot;&gt;💬 바다에&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;💡바ᄅᆞᆯ+애(부사격 조사)&lt;/span&gt;&lt;/div&gt;">바•ᄅᆞ•래</span>​&nbsp; &nbsp; •가ᄂᆞ•니&nbsp;</div><div style="text-align: right;">&lt;제2장&gt;</div><div style="text-align: right;"><br></div><div><b>현대어 풀이</b></div><div>뿌리가 깊은 나무는 바람에 아니 움직이므로, 꽃 좋고 열매 많으니.</div><div>샘이 깊은 물은 가뭄에 아니 그치므로, 내가 이루어져 바다에 가느니.</div><div><br></div></div>
                                </div>
                            </details></div><div class="block no-title-block" data-type="summary"><details class="summary-preview-container">
                            <summary class="summary-preview-summary">
                                <span class="summary-preview-title-pill">📖 핵심 구절 요약</span>
                                <span class="summary-preview-toggle-icon">▼</span>
                            </summary>
                            <div class="summary-preview-content">
                                <ul><li><strong>▪️용비어천가(龍飛御天歌)</strong> : <span style="font-size: medium; text-align: center;">💬 용이 날아올라 하늘을 다스림을 노래한다는 뜻.&nbsp;</span><div><div style="text-align: center;"><font size="3"><br></font></div><div><span style="font-size: medium; text-align: center;">💡<b>용비어천가의 '용'?</b>&nbsp;</span></div><div><span style="font-size: medium; text-align: center;">&nbsp; &nbsp;조선을 건국한 태조 이성계를 비롯한 세종의 여섯 선조를 상징.&nbsp;</span></div><div><span style="font-size: medium; text-align: center;">&nbsp; &nbsp;목조-익조-도조-환조-태조 이성계-태종 이방원</span></div></div></li><li><strong>▪️海東(해동)</strong> : <span style="font-size: medium;">💬 발해의 동쪽이라는 뜻으로, 예전에 우리나라를 이르던 말.</span><div><span style="font-size: medium;">💡우리 나라 별칭: 동국, 근역(무궁화 지역), 청구(푸른 언덕)</span></div></li><li><strong>▪️六龍(육룡)•이</strong> : <span style="font-size: medium;">💬 당시 임금인 세종의 여섯 조상을 가리켜 한 말.&nbsp;</span><div><span style="font-size: medium;">💡 목조&gt;익조&gt;도조&gt;환조&gt;태조 이성계 &gt; 태종 이방원&nbsp;&nbsp;</span></div><div><span style="font-size: medium;"><br></span></div><div><span style="font-size: medium;">📍이: 주격 조사.&nbsp; (자음 + <span style="background-color: rgb(255, 250, 205);">이</span>)&nbsp;</span></div></li><li><strong>▪️ᄂᆞᄅᆞ•샤</strong> : <span style="font-size: medium;">💬 ᄂᆞᆯ-+-ᄋᆞ-+-샤-+-아&nbsp;&nbsp;</span><div><span style="font-size: medium;">🔸-샤-: 주체 높임 선어말 어미. (💡 '-샤-' + 모음)</span></div><div><span style="font-size: medium;">🔸-아: 어말 어미</span></div></li><li><strong>▪️天福(천복</strong> : <span style="font-size: medium;">💬 하늘의 복&nbsp;</span><div><span style="font-size: medium;"><br></span></div><div><span style="font-size: medium;">💡조선 왕조의 창업이 <span style="background-color: rgb(255, 214, 214);">하늘의 뜻</span>에 의한 역사적 순리라는 점을 주장하여 ①&nbsp;<span style="background-color: rgb(210, 234, 255);">사대부들의 충성심을 자극</span>하고&nbsp; ②&nbsp;<span style="background-color: rgb(210, 234, 255);">민심의 이반을 막고자 함</span>.&nbsp; &nbsp;➡️ 새 왕조의 정당성 부각</span></div></li><li><strong>▪️古聖(고성)•이</strong> : <span style="font-size: medium;">💬 중국의 옛 성인인 제왕</span><b style="font-size: medium;">과</b><span style="font-size: medium;">&nbsp;&nbsp;</span><div><span style="font-size: medium;"><br></span></div><div><span style="font-size: medium;">💡육조의 위대함을 중국 제왕들의 사적과 일치시켜 조선 건국의 정당성을 강조함.&nbsp;&nbsp;</span></div><div><span style="font-size: medium;">💡 중국 고사 활용&nbsp;&nbsp;</span></div><div><span style="font-size: medium;">📌 이: 비교 부사격 조사. (~과/와)&nbsp;</span></div></li><li><strong>▪️同符(동부)</strong> : <span style="font-size: medium;">💬부신(符信)이 꼭 들어맞듯 사물이나 현상이 서로 꼭 들어맞다.&nbsp;</span><div><span style="font-size: medium;">💡중국 고성(古聖)의 사적 = 육조六祖의 사적</span></div></li><li><strong>▪️불•휘</strong> : <span style="font-size: medium;">💬 뿌리가&nbsp;&nbsp;</span><div><span style="font-size: medium;">💡 불휘(뿌리) + ∅(주격 조사)</span></div></li><li><strong>▪️기•픈</strong> : <br></li><li><strong>▪️남•ᄀᆞᆫ</strong> : <span style="font-size: medium;">💬 나무는&nbsp;</span><div><span style="font-size: medium;">💡남ㄱ(나모) + ᄋᆞᆫ</span></div></li><li><strong>▪️ᄇᆞᄅᆞ•매</strong> : 💬바람에<div>💡애<font size="3">: 부사격 조사</font></div></li><li><strong>▪️：뮐•ᄊᆡ</strong> : <span style="font-size: medium;">💬 움직이므로&nbsp;</span><div><span style="font-size: medium;">💡뮈다: 움직이다&nbsp;</span></div><div><span style="font-size: medium;">💡뮈-+-ㄹᄊ(이유)</span></div></li><li><strong>▪️곶</strong> : 💬꽃<div>✨ 종성으로 'ㅈ' 사용하였음. '종성부용초성'의 모습을 보임.</div></li><li><strong>▪️：됴•코</strong> : <span style="font-size: medium;">💬 좋고&nbsp;&nbsp;</span><div><span style="font-size: medium;">💡 (중세 국어에서)&nbsp;&nbsp;</span></div><div><span style="font-size: medium;">&nbsp; &nbsp;① 둏다: 좋다(好)</span></div><div><span style="font-size: medium;">&nbsp; &nbsp;② 좋다: 깨끗하(淨)</span></div></li><li><strong>▪️여•름</strong> : <span style="font-size: medium;">💬 열매&nbsp; &nbsp;</span><div><span style="font-size: medium;">💡열-(어근)+-음(명사형 파생 접미사)</span></div></li><li><strong>▪️•하ᄂᆞ•니</strong> : <span style="font-size: medium;">💬 많으니&nbsp;</span><div><span style="font-size: medium;">💡(중세 국어에서)</span></div><div><span style="font-size: medium;">&nbsp; &nbsp; ▪️하다: 많다(多)</span></div><div><span style="font-size: medium;">&nbsp; &nbsp; ▪️ᄒᆞ다: ~을 하다(爲)</span></div></li><li><strong>▪️：ᄉᆡ•미&nbsp;</strong> : <span style="font-size: medium;">💬 ᄉᆡᆷ+이(주격 조사)</span></li><li><strong>▪️•므•른</strong> : <span style="font-size: medium;">💬믈+은&nbsp; &nbsp;</span><div><span style="font-size: medium;">💡믈 &gt; 물 (원순모음화)</span></div></li><li><strong>▪️•ᄀᆞᄆᆞ•래</strong> : <span style="font-size: medium;">💬가뭄에&nbsp; &nbsp;</span><div><span style="font-size: medium;">💡ᄀᆞᄆᆞᆯ+애(부사격 조사)</span></div></li><li><strong>▪️：내•히</strong> : <span style="font-size: medium;">💬 내가&nbsp;</span><div><span style="font-size: medium;">💡내ㅎ+이(주격 조사)</span></div></li><li><strong>▪️이•러</strong> : <span style="font-size: medium;">💬이루어져</span></li><li><strong>▪️바•ᄅᆞ•래</strong> : <span style="font-size: medium;">💬 바다에</span><div><span style="font-size: medium;">💡바ᄅᆞᆯ+애(부사격 조사)</span></div></li></ul>
                            </div>
                        </details></div></div><div class="tab-content " data-tab-content-id="tab-1758327017361"><h2 style="display:none;">형성평가</h2><div class="block" data-type="fill-in"><div class="block-title">[] 빈칸 넣기</div><div class="fill-in-container" data-attempts="0"><div class="quiz-title-preview"></div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVEJTgzJTlDJUVDJUEyJTg1JTIyJTVE">
                                    <strong>1.</strong> 용비어천가 제1장에서 '해동(海東)'은 우리나라를 뜻하며, '육룡(六龍)'은 조선 건국에 기여한 여섯 임금, 즉 목조, 익조, 도조, 환조, 태조, 그리고 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVEJTgzJTlDJUVDJUEyJTg1">을/를 가리킵니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVEJTk1JTk4JUVCJThBJTk4JTIyJTVE">
                                    <strong>2.</strong> 제1장의 '일마다 천복(天福)이시니'라는 구절은, 육룡이 하시는 일마다 모두 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVEJTk1JTk4JUVCJThBJTk4">의/의 복을 받았다는 의미를 담고 있습니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVDJTg0JUIxJUVEJTk4JTg0KCUyMCVFQyVBMCU5QyVFQyU5OSU5NSklMjIlNUQ=">
                                    <strong>3.</strong> 제1장의 '고성(古聖)과 동부(同符)하시니'는 육룡의 위대한 업적이 중국의 옛 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVDJTg0JUIxJUVEJTk4JTg0KCUyMCVFQyVBMCU5QyVFQyU5OSU5NSk=">들과 꼭 들어맞는다는 것을 의미합니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVCJUJGJThDJUVCJUE2JUFDJTIyJTVE">
                                    <strong>4.</strong> 제2장의 '불휘 기픈 남ᄀᆞᆫ'이라는 표현에서 '불휘'는 오늘날의 '<input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVCJUJGJThDJUVCJUE2JUFD"> '에 해당하는 단어로, 나라의 튼튼한 기초를 상징합니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVDJThCJTlDJUVCJUEwJUE4JTIyJTVE">
                                    <strong>5.</strong> &nbsp;'불휘 기픈 남ᄀᆞᆫ ᄇᆞᄅᆞ매 아니 뮐ᄊᆡ' 구절에서 'ᄇᆞᄅᆞᆷ'은 나라에 닥칠 수 있는 온갖 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVDJThCJTlDJUVCJUEwJUE4">와/과 역경을 비유적으로 표현한 것입니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVDJTk3JUI0JUVCJUE3JUE0JTIyJTVE">
                                    <strong>6.</strong> &nbsp;'곶 됴코 여름 하ᄂᆞ니'라는 구절에서 '여름'은 현대어 '<input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVDJTk3JUI0JUVCJUE3JUE0">'에 해당하는 단어로, 문화의 융성과 왕조의 결실을 상징합니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVDJTlDJUEwJUVDJTg0JTlDJTIyJTVE">
                                    <strong>7.</strong> 제2장에서 'ᄉᆡ미 기픈 므른'은 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVDJTlDJUEwJUVDJTg0JTlD">가/이 오래되고 깊은 나라를 비유하는 표현입니다.&nbsp;'샘이 깊은 물'은 그 근원이 오래되었음을 의미하며, 이는 곧 나라의 역사와 전통이 깊다는 것을 비유합니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVBJUIwJTgwJUVCJUFEJTg0JTIyJTVE">
                                    <strong>8.</strong> &nbsp;'ᄉᆡ미 기픈 므른 ᄀᆞᄆᆞ래 아니 그츨ᄊᆡ'에서 'ᄀᆞᄆᆞᆯ'은 오늘날의 '<input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVBJUIwJTgwJUVCJUFEJTg0">'을/를 의미하며, 나라에 닥치는 고난을 상징합니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVCJUIwJTk0JUVCJThCJUE0JTIyJTVE">
                                    <strong>9.</strong> '내히 이러 바ᄅᆞ래 가ᄂᆞ니'는 시냇물이 모여 결국 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVCJUIwJTk0JUVCJThCJUE0">로 흘러가듯, 조선 왕조가 영원히 지속될 것임을 노래하는 구절입니다.
                                </div><div class="fill-in-preview-item" data-answers="JTVCJTIyJUVCJUI5JTg0JUVDJTlDJUEwJTIyJTVE">
                                    <strong>10.</strong> &nbsp;용비어천가 제2장은 '뿌리 깊은 나무'와 '샘이 깊은 물'이라는 두 가지 소재를 사용하여 조선 왕조의 굳건한 기반과 영원한 번영을 노래합니다. 이처럼 어떤 관념이나 사물을 다른 사물에 빗대어 표현하는 방법을 <input type="text" class="blank-input-preview" data-blank-index="1" data-answer="JUVCJUI5JTg0JUVDJTlDJUEw">법이라고 합니다.
                                </div>
                        <div class="quiz-controls">
                            <span class="feedback"></span>
                            <button class="check-fill-in-btn">정답 확인</button>
                            <button class="retry-quiz-btn" style="display:none;">다시 풀기</button>
                        </div></div></div></div></div>
                <div id="explanationPopup" class="explanation-popup"></div>
            
                    </div>
                    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const explanationPopup = document.getElementById('explanationPopup');
            const previewContainer = document.querySelector('[style*="max-width: 800px"]');

            const tabButtonsContainer = document.querySelector('#preview-tab-buttons');
            if (tabButtonsContainer) {
                tabButtonsContainer.addEventListener('click', e => {
                    const tabButton = e.target.closest('.tab-btn');
                    if (!tabButton) return;

                    const tabId = tabButton.dataset.tabId;

                    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                    tabButton.classList.add('active');
                    const activeContent = document.querySelector('.tab-content[data-tab-content-id="' + tabId + '"]');
                    if (activeContent) {
                        activeContent.classList.add('active');
                        if (window.MathJax && window.MathJax.typesetPromise) {
                            window.MathJax.typesetPromise([activeContent]);
                        }
                    }
                    
                    // ✅ 탭 클릭 시 상단으로 스크롤하는 코드 추가
                    if (previewContainer) {
                        previewContainer.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            function adjustBlankInputWidths(container) {
                const measureSpan = document.createElement('span');
                measureSpan.style.visibility = 'hidden';
                measureSpan.style.position = 'absolute';
                measureSpan.style.fontFamily = 'inherit';
                measureSpan.style.fontSize = '1em';
                document.body.appendChild(measureSpan);

                container.querySelectorAll('.blank-input-preview').forEach(input => {
                    const encodedAnswer = input.dataset.answer;
                    if (encodedAnswer) {
                        try {
                            const answer = decodeURIComponent(atob(encodedAnswer));
                            measureSpan.textContent = answer || '____';
                            const textWidth = measureSpan.offsetWidth;
                            input.style.width = (textWidth + 10) + 'px';
                        } catch (e) {}
                    }
                });
                document.body.removeChild(measureSpan);
            }

            function initializeAllInteractiveBlocks() {
                document.querySelectorAll('.line-quiz-preview').forEach(quizEl => {
                    initializeLineQuiz(quizEl);
                });
            }

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            function initializeLineQuiz(quizEl) {
                if (quizEl.lineQuizInstance) {
                    quizEl.lineQuizInstance.reset();
                    return;
                }
                const canvas = quizEl.querySelector('.line-quiz-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                const allDots = quizEl.querySelectorAll('.dot');
                let selectedDot = null;
                let connections = [];

                const matchItemHeights = () => {
                    const leftItems = Array.from(quizEl.querySelectorAll('.line-quiz-column:first-child .line-quiz-item'));
                    const rightItems = Array.from(quizEl.querySelectorAll('.line-quiz-column:last-child .line-quiz-item'));
                    const numItems = Math.min(leftItems.length, rightItems.length);
                    for (let i = 0; i < numItems; i++) {
                        leftItems[i].style.height = '';
                        rightItems[i].style.height = '';
                        const leftHeight = leftItems[i].offsetHeight;
                        const rightHeight = rightItems[i].offsetHeight;
                        const maxHeight = Math.max(leftHeight, rightHeight);
                        if (maxHeight > 36) {
                            leftItems[i].style.height = maxHeight + 'px';
                            rightItems[i].style.height = maxHeight + 'px';
                        }
                    }
                };

                const resizeCanvas = () => {
                    if (!quizEl.isConnected) return;
                    canvas.width = quizEl.clientWidth;
                    canvas.height = quizEl.clientHeight;
                    matchItemHeights();
                    redrawLines();
                };

                const getDotPosition = (dot) => {
                    const dotRect = dot.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();
                    return {
                        x: dotRect.left - canvasRect.left + dotRect.width / 2,
                        y: dotRect.top - canvasRect.top + dotRect.height / 2
                    };
                };
                const redrawLines = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    connections.forEach(conn => {
                        const startDot = quizEl.querySelector('.line-quiz-column:first-child .dot[data-id="' + conn.leftId + '"]');
                        const endDot = quizEl.querySelector('.line-quiz-column:last-child .dot[data-id="' + conn.rightId + '"]');
                        if (!startDot || !endDot) return;
                        const startPos = getDotPosition(startDot);
                        const endPos = getDotPosition(endDot);
                        ctx.beginPath();
                        ctx.moveTo(startPos.x, startPos.y);
                        ctx.lineTo(endPos.x, endPos.y);
                        ctx.strokeStyle = conn.color || '#007bff';
                        ctx.lineWidth = 3;
                        ctx.stroke();
                    });
                };
                const handleDotClick = (e) => {
                    const dot = e.target;
                    if (!dot.classList.contains('dot') || dot.classList.contains('disabled')) return;
                    if (!selectedDot) {
                        selectedDot = dot;
                        dot.classList.add('selected');
                    } else {
                        if (selectedDot.closest('.line-quiz-column') === dot.closest('.line-quiz-column')) {
                            selectedDot.classList.remove('selected');
                            selectedDot = dot;
                            dot.classList.add('selected');
                            return;
                        }
                        const leftDot = selectedDot.closest('.line-quiz-column:first-child') ? selectedDot : dot;
                        const rightDot = selectedDot.closest('.line-quiz-column:last-child') ? selectedDot : dot;
                        const leftId = leftDot.dataset.id;
                        const rightId = rightDot.dataset.id;
                        connections = connections.filter(c => c.leftId !== leftId);
                        connections.push({ leftId, rightId });
                        redrawLines();
                        selectedDot.classList.remove('selected');
                        selectedDot = null;
                    }
                };

                const instance = {
                    checkAnswers: () => {
                        connections.forEach(conn => {
                            conn.color = conn.leftId === conn.rightId ? '#28a745' : '#dc3545';
                        });
                        redrawLines();
                        allDots.forEach(d => d.classList.add('disabled'));
                    },
                    reset: () => {
                        connections = [];
                        selectedDot = null;
                        allDots.forEach(dot => dot.classList.remove('selected', 'disabled'));
                        const rightColumnEl = quizEl.querySelector('.line-quiz-column:last-child');
                        const rightItems = Array.from(rightColumnEl.querySelectorAll('.line-quiz-item'));
                        shuffle(rightItems);
                        rightColumnEl.innerHTML = '';
                        rightItems.forEach(item => rightColumnEl.appendChild(item));
                        redrawLines();
                        setTimeout(resizeCanvas, 0);
                    }
                };
                quizEl.lineQuizInstance = instance;
                quizEl.addEventListener('click', handleDotClick);
                const resizeObserver = new ResizeObserver(resizeCanvas);
                resizeObserver.observe(quizEl);
                instance.reset();
            }

            let currentDraggedItem = null;
            let dropIndicator = null; 

            function getDragAfterElementHorizontal(container, x) {
                const draggableElements = [...container.querySelectorAll('.ordering-item:not(.dragging)')];

                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = x - box.left - box.width / 2;
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            previewContainer.addEventListener('dragstart', e => {
                if (e.target.matches('.drag-source, .ordering-item')) {
                    currentDraggedItem = e.target;
                    setTimeout(() => e.target.classList.add('dragging'), 0);
                    e.dataTransfer.setData('text/plain', e.target.textContent);
                    if (e.target.matches('.ordering-item')) {
                        dropIndicator = document.createElement('div');
                        dropIndicator.className = 'ordering-drop-indicator';
                    }
                }
            });

            previewContainer.addEventListener('dragend', e => {
                if (e.target.matches('.drag-source, .ordering-item')) {
                    e.target.classList.remove('dragging');
                    if (dropIndicator && dropIndicator.parentNode) {
                        dropIndicator.parentNode.removeChild(dropIndicator);
                    }
                    dropIndicator = null;
                    currentDraggedItem = null;
                }
            });

            previewContainer.addEventListener('dragover', e => {
                e.preventDefault();
                const targetContainer = e.target.closest('.ordering-target-container');
                if (e.target.matches('.drop-target')) {
                    e.target.classList.add('drag-over');
                }
                else if (targetContainer && currentDraggedItem && currentDraggedItem.matches('.ordering-item')) {
                    targetContainer.classList.add('drag-over');
                    const afterElement = getDragAfterElementHorizontal(targetContainer, e.clientX);
                    if (afterElement == null) {
                        if (targetContainer.lastChild !== dropIndicator) {
                            targetContainer.appendChild(dropIndicator);
                        }
                    } else {
                        if (afterElement.previousSibling !== dropIndicator) {
                            targetContainer.insertBefore(dropIndicator, afterElement);
                        }
                    }
                }
            });
            
            previewContainer.addEventListener('dragleave', e => {
                const targetContainer = e.target.closest('.ordering-target-container');
                if (e.target.matches('.drop-target')) {
                    e.target.classList.remove('drag-over');
                } else if(targetContainer){
                    targetContainer.classList.remove('drag-over');
                }
                if(targetContainer && dropIndicator && dropIndicator.parentNode) {
                    dropIndicator.parentNode.removeChild(dropIndicator);
                }
            });
            
            previewContainer.addEventListener('drop', e => {
                e.preventDefault();
                if (e.target.classList.contains('drop-target')) {
                    e.target.classList.remove('drag-over');
                    const sourceContainer = e.target.closest('.drag-drop-preview-container').querySelector('.source-container');
                    if (e.target.textContent) {
                        const oldSource = document.createElement('span');
                        oldSource.className = 'drag-source';
                        oldSource.draggable = true;
                        oldSource.textContent = e.target.textContent;
                        sourceContainer.appendChild(oldSource);
                    }
                    e.target.textContent = e.dataTransfer.getData('text/plain');
                    if (currentDraggedItem) {
                        if(currentDraggedItem.parentElement.classList.contains('source-container')){
                            currentDraggedItem.parentElement.removeChild(currentDraggedItem);
                        } else {
                            currentDraggedItem.textContent = '';
                        }
                    }
                }
                else if (e.target.closest('.ordering-source-container, .ordering-target-container')) {
                    const container = e.target.closest('.ordering-source-container, .ordering-target-container');
                    container.classList.remove('drag-over');
                    if (dropIndicator && dropIndicator.parentNode) {
                        dropIndicator.parentNode.replaceChild(currentDraggedItem, dropIndicator);
                    } else if (currentDraggedItem) { 
                        const afterElement = getDragAfterElementHorizontal(container, e.clientX);
                        if (afterElement == null) {
                            container.appendChild(currentDraggedItem);
                        } else {
                            container.insertBefore(currentDraggedItem, afterElement);
                        }
                    }
                    const quizContainer = container.closest('.ordering-preview-container');
                    if (quizContainer && container.classList.contains('ordering-target-container')) {
                        if (container.classList.contains('correct') || container.classList.contains('incorrect')) {
                            container.classList.remove('correct', 'incorrect');
                            const controls = quizContainer.querySelector('.quiz-controls');
                            if (controls) {
                                controls.querySelector('.retry-quiz-btn').style.display = 'none';
                                controls.querySelector('.check-ordering-btn').style.display = 'inline-block';
                                const feedbackEl = controls.querySelector('.feedback');
                                feedbackEl.className = 'feedback';
                                feedbackEl.innerHTML = '';
                            }
                        }
                    }
                }
            });

            previewContainer.addEventListener('click', e => {
                const summary = e.target.closest('.frame-preview-summary, .summary-preview-summary, .text-preview-summary');
                if (summary) {
                    e.preventDefault();
                    const details = summary.parentElement;
                    details.open = !details.open;
                    return;
                }
                const retryBtn = e.target.closest('.retry-quiz-btn');
                const checkAnswerBtn = e.target.closest('.check-answer-btn');
                const checkFillInBtn = e.target.closest('.check-fill-in-btn');
                const checkLineQuizBtn = e.target.closest('.check-line-quiz-btn');
                const checkDragDropBtn = e.target.closest('.check-drag-drop-btn');
                const checkOrderingBtn = e.target.closest('.check-ordering-btn');
                const youtubePlaceholder = e.target.closest('.youtube-placeholder');

                if (retryBtn) {
                    const quizContainer = retryBtn.closest('.quiz-container, .mcq-preview-item, .descriptive-preview-item, .fill-in-container, .table-preview-container, .drag-drop-preview-container, .ordering-preview-container, .text-content-container, .text-preview-container');
                    if (quizContainer) {
                        const controls = quizContainer.querySelector('.quiz-controls');
                        if (controls && controls.querySelector('.feedback')) {
                            controls.querySelector('.feedback').className = 'feedback';
                            controls.querySelector('.feedback').innerHTML = '';
                        }
                        quizContainer.querySelectorAll('.explanation').forEach(el => { el.className = 'explanation' });
                        if (quizContainer.querySelector('.ox-preview-item')) {
                            quizContainer.querySelectorAll('.ox-preview-item .feedback').forEach(fb => {
                                fb.className = 'feedback';
                                fb.innerHTML = '';
                            });
                        }
                        if (quizContainer.classList.contains('mcq-preview-item')) {
                            quizContainer.dataset.attempts = "0";
                        }
                        if (quizContainer.classList.contains('descriptive-preview-item')) {
                            const studentAnswerEl = quizContainer.querySelector('.descriptive-student-answer');
                            studentAnswerEl.value = '';
                            studentAnswerEl.disabled = false;
                            quizContainer.querySelector('.check-answer-btn').style.display = 'inline-block';
                            retryBtn.style.display = 'none';
                        }
                        const fillInBlanks = quizContainer.querySelectorAll('.blank-input-preview');
                        if (fillInBlanks.length > 0) {
                            quizContainer.dataset.attempts = "0";
                            fillInBlanks.forEach(input => {
                                input.value = '';
                                input.disabled = false;
                                input.className = 'blank-input-preview';
                            });
                            const checkBtn = quizContainer.querySelector('.check-fill-in-btn');
                            if (checkBtn) checkBtn.style.display = 'inline-block';
                            retryBtn.style.display = 'none';
                        }
                        const lineQuizPreview = quizContainer.querySelector('.line-quiz-preview');
                        if (lineQuizPreview && lineQuizPreview.lineQuizInstance) {
                            lineQuizPreview.lineQuizInstance.reset();
                            retryBtn.style.display = 'none';
                            quizContainer.querySelector('.check-line-quiz-btn').style.display = 'inline-block';
                        }
                        if (quizContainer.classList.contains('drag-drop-preview-container')) {
                            const sourceContainer = quizContainer.querySelector('.source-container');
                            const allWords = [];
                            quizContainer.querySelectorAll('.drop-target').forEach(target => {
                                if (target.textContent.trim()) { allWords.push(target.textContent.trim()); }
                                target.textContent = '';
                                target.className = 'drop-target';
                            });
                            sourceContainer.querySelectorAll('.drag-source').forEach(source => {
                                allWords.push(source.textContent.trim());
                            });
                            const originalAnswers = Array.from(quizContainer.querySelectorAll('.drop-target')).map(t => t.dataset.answer);
                            while(allWords.length < originalAnswers.length) {
                                const wordCount = allWords.reduce((acc, word) => { acc[word] = (acc[word] || 0) + 1; return acc; }, {});
                                const originalWordCount = originalAnswers.reduce((acc, word) => { acc[word] = (acc[word] || 0) + 1; return acc; }, {});
                                let missingWordFound = false;
                                for(const word in originalWordCount) {
                                    if((wordCount[word] || 0) < originalWordCount[word]) {
                                        allWords.push(word);
                                        missingWordFound = true;
                                        break;
                                    }
                                }
                                if (!missingWordFound) break;
                            }
                            sourceContainer.innerHTML = '';
                            const shuffledWords = shuffle(allWords);
                            shuffledWords.forEach(word => {
                                const newSource = document.createElement('span');
                                newSource.className = 'drag-source';
                                newSource.draggable = true;
                                newSource.textContent = word;
                                sourceContainer.appendChild(newSource);
                            });
                            retryBtn.style.display = 'none';
                            quizContainer.querySelector('.check-drag-drop-btn').style.display = 'inline-block';
                        }
                        if (quizContainer.classList.contains('ordering-preview-container')) {
                            const sourceContainer = quizContainer.querySelector('.ordering-source-container');
                            const targetContainer = quizContainer.querySelector('.ordering-target-container');
                            const allItems = Array.from(quizContainer.querySelectorAll('.ordering-item'));
                            shuffle(allItems).forEach(item => sourceContainer.appendChild(item));
                            targetContainer.innerHTML = '';
                            targetContainer.className = 'ordering-target-container';
                            retryBtn.style.display = 'none';
                            quizContainer.querySelector('.check-ordering-btn').style.display = 'inline-block';
                        }
                    }
                } else if (checkAnswerBtn) {
                    const item = checkAnswerBtn.closest('.descriptive-preview-item');
                    const studentAnswerEl = item.querySelector('.descriptive-student-answer');
                    const studentAnswer = studentAnswerEl.value.trim();
                    const feedbackEl = item.querySelector('.feedback');
                    const retryBtnItem = item.querySelector('.retry-quiz-btn');
                    const encodedAnswers = item.dataset.answers;
                    const correctAnswers = JSON.parse(decodeURIComponent(atob(encodedAnswers)));
                    if (!studentAnswer) { alert('답을 입력해주세요!'); return; }
                    const isCorrect = correctAnswers.some(ans => ans.toLowerCase() === studentAnswer.toLowerCase());
                    feedbackEl.className = 'feedback show ' + (isCorrect ? 'correct' : 'incorrect');
                    feedbackEl.innerHTML = isCorrect ? '<span class="correct-highlight">정답!</span> 훌륭해요! 👍' : '<span class="incorrect-highlight">오답</span> 정답: ' + correctAnswers.join(', ');
                    studentAnswerEl.disabled = true;
                    checkAnswerBtn.style.display = 'none';
                    retryBtnItem.style.display = 'inline-block';
                } else if (checkFillInBtn) {
                    const container = checkFillInBtn.closest('.fill-in-container, .table-preview-container, .text-content-container, .text-preview-container');
                    if (!container) return;
                    const feedbackEl = container.querySelector('.feedback');
                    let attempts = parseInt(container.dataset.attempts, 10);
                    attempts++;
                    container.dataset.attempts = attempts;
                    let allCorrect = true;
                    if (container.classList.contains('fill-in-container')) {
                        container.querySelectorAll('.fill-in-preview-item').forEach(item => {
                            const encodedAnswers = item.dataset.answers;
                            const correctAnswers = JSON.parse(decodeURIComponent(atob(encodedAnswers)));
                            item.querySelectorAll('.blank-input-preview').forEach(inputEl => {
                                const blankIndex = parseInt(inputEl.dataset.blankIndex, 10) - 1;
                                const studentAnswer = inputEl.value.trim();
                                const correctAnswer = correctAnswers[blankIndex] || '';
                                if (studentAnswer && studentAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                                    inputEl.className = 'blank-input-preview correct';
                                } else {
                                    inputEl.className = 'blank-input-preview incorrect';
                                    allCorrect = false;
                                }
                            });
                        });
                    } else {
                        container.querySelectorAll('.blank-input-preview').forEach(inputEl => {
                            const studentAnswer = inputEl.value.trim();
                            const correctAnswer = decodeURIComponent(atob(inputEl.dataset.answer));
                            if (studentAnswer && studentAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                                inputEl.className = 'blank-input-preview correct';
                            } else {
                                inputEl.className = 'blank-input-preview incorrect';
                                allCorrect = false;
                            }
                        });
                    }
                    if (allCorrect) {
                        feedbackEl.textContent = '모두 정답입니다!';
                        feedbackEl.className = 'feedback show correct';
                        container.querySelectorAll('.blank-input-preview').forEach(inputEl => inputEl.disabled = true);
                        checkFillInBtn.style.display = 'none';
                        container.querySelector('.retry-quiz-btn').style.display = 'inline-block';
                    } else if (attempts < 2) {
                        feedbackEl.textContent = '아쉬워요. 틀린 문제를 다시 풀어보세요!';
                        feedbackEl.className = 'feedback show incorrect';
                        setTimeout(() => { feedbackEl.className = 'feedback'; feedbackEl.textContent = ''; }, 2500);
                        container.querySelectorAll('.blank-input-preview.incorrect').forEach(inputEl => {
                            inputEl.value = '';
                            inputEl.className = 'blank-input-preview';
                        });
                    } else {
                        feedbackEl.textContent = '정답을 확인하세요.';
                        feedbackEl.className = 'feedback show incorrect';
                        container.querySelectorAll('.blank-input-preview.incorrect').forEach(inputEl => {
                            inputEl.disabled = true;
                            let correctAnswer = '';
                            if (container.classList.contains('fill-in-container')) {
                                const item = inputEl.closest('.fill-in-preview-item');
                                const encodedAnswers = item.dataset.answers;
                                const correctAnswers = JSON.parse(decodeURIComponent(atob(encodedAnswers)));
                                const blankIndex = parseInt(inputEl.dataset.blankIndex, 10) - 1;
                                correctAnswer = correctAnswers[blankIndex] || '';
                            } else {
                                correctAnswer = decodeURIComponent(atob(inputEl.dataset.answer));
                            }
                            inputEl.value = correctAnswer;
                        });
                        checkFillInBtn.style.display = 'none';
                        container.querySelector('.retry-quiz-btn').style.display = 'inline-block';
                    }
                } else if (checkDragDropBtn) {
                    const container = checkDragDropBtn.closest('.drag-drop-preview-container');
                    const feedbackEl = container.querySelector('.feedback');
                    let allCorrect = true;
                    container.querySelectorAll('.drop-target').forEach(target => {
                        const studentAnswer = target.textContent.trim();
                        const correctAnswer = target.dataset.answer;
                        if (studentAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                            target.className = 'drop-target correct';
                        } else {
                            target.className = 'drop-target incorrect';
                            allCorrect = false;
                        }
                    });
                    if (allCorrect) {
                        feedbackEl.textContent = '모두 정답입니다!';
                        feedbackEl.className = 'feedback show correct';
                    } else {
                        feedbackEl.textContent = '아쉬워요. 틀린 문제가 있는지 확인해보세요.';
                        feedbackEl.className = 'feedback show incorrect';
                    }
                    checkDragDropBtn.style.display = 'none';
                    container.querySelector('.retry-quiz-btn').style.display = 'inline-block';
                } else if (checkOrderingBtn) {
                    const container = checkOrderingBtn.closest('.ordering-preview-container');
                    const targetContainer = container.querySelector('.ordering-target-container');
                    const feedbackEl = container.querySelector('.feedback');
                    const studentItems = Array.from(targetContainer.querySelectorAll('.ordering-item')).map(item => item.textContent.trim());
                    const studentAnswer = studentItems.join(' // ');
                    const correctAnswer = decodeURIComponent(atob(container.dataset.answer));
                    if (studentAnswer === correctAnswer) {
                        targetContainer.classList.add('correct');
                        feedbackEl.textContent = '정답입니다! 완벽해요! ✨';
                        feedbackEl.className = 'feedback show correct';
                    } else {
                        targetContainer.classList.add('incorrect');
                        feedbackEl.textContent = '아쉬워요. 순서를 다시 확인해보세요.';
                        feedbackEl.className = 'feedback show incorrect';
                    }
                    checkOrderingBtn.style.display = 'none';
                    container.querySelector('.retry-quiz-btn').style.display = 'inline-block';
                } else if (checkLineQuizBtn) {
                    const quizEl = checkLineQuizBtn.closest('.quiz-container').querySelector('.line-quiz-preview');
                    if (quizEl && quizEl.lineQuizInstance) {
                        quizEl.lineQuizInstance.checkAnswers();
                        checkLineQuizBtn.style.display = 'none';
                        checkLineQuizBtn.nextElementSibling.style.display = 'inline-block';
                    }
                } else if (youtubePlaceholder) {
                    const videoId = youtubePlaceholder.dataset.videoId;
                    if(videoId) {
                        const iframeWrapper = document.createElement('div');
                        iframeWrapper.className = 'youtube-iframe-wrapper';
                        iframeWrapper.dataset.videoId = videoId;
                        iframeWrapper.innerHTML = '<button class="youtube-close-btn" title="영상 닫기">&times;</button><iframe src="https://www.youtube-nocookie.com/embed/' + videoId + '?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
                        youtubePlaceholder.replaceWith(iframeWrapper);
                    }
                } else {
                    const youtubeCloseBtn = e.target.closest('.youtube-close-btn');
                    if (youtubeCloseBtn) {
                        const iframeWrapper = youtubeCloseBtn.parentElement;
                        const videoId = iframeWrapper.dataset.videoId;
                        if(videoId) {
                            const placeholder = document.createElement('div');
                            placeholder.className = 'youtube-placeholder';
                            placeholder.dataset.videoId = videoId;
                            placeholder.innerHTML = '🎬<div class="youtube-placeholder-text">클릭하여 영상 보기</div>';
                            iframeWrapper.replaceWith(placeholder);
                        }
                    } else {
                        const oxChoiceBtn = e.target.closest('.ox-choices button');
                        const mcqOptionDiv = e.target.closest('.mcq-preview-option');
                        const explainable = e.target.closest('.explainable');
                        if (oxChoiceBtn) {
                            const item = oxChoiceBtn.closest('.ox-preview-item');
                            const choicesDiv = item.querySelector('.ox-choices');
                            const choice = oxChoiceBtn.dataset.choice;
                            const answer = choicesDiv.dataset.answer;
                            const feedbackEl = item.querySelector('.feedback');
                            feedbackEl.className = 'feedback show ' + (choice === answer ? 'correct' : 'incorrect');
                            feedbackEl.innerHTML = choice === answer ? '<span class="correct-highlight">정답!</span> 참 잘했어요! ✨' : '<span class="incorrect-highlight">아쉬워요.</span> 다시 생각해 볼까요? 🤔';
                        } else if (mcqOptionDiv) {
                            const item = mcqOptionDiv.closest('.mcq-preview-item');
                            const controls = item.querySelector('.quiz-controls');
                            if (controls) controls.style.display = 'flex';
                            let attempts = parseInt(item.dataset.attempts, 10);
                            if (item.querySelector('.feedback').classList.contains('correct') || attempts >= 2) return;
                            attempts++;
                            item.dataset.attempts = attempts;
                            const choice = mcqOptionDiv.dataset.choice;
                            const answer = item.dataset.answer;
                            const feedbackEl = item.querySelector('.feedback');
                            const explanationEl = item.querySelector('.explanation');
                            if (choice === answer) {
                                feedbackEl.className = 'feedback show correct';
                                feedbackEl.innerHTML = '<span class="correct-highlight">정답!</span> 훌륭해요, 💯';
                                item.dataset.attempts = 2;
                                if(explanationEl) explanationEl.className = 'explanation show';
                            } else {
                                feedbackEl.className = 'feedback show incorrect';
                                if (attempts < 2) {
                                    feedbackEl.innerHTML = '<span class="incorrect-highlight">아쉬워요.</span> 한 번 더 신중하게 풀어보세요!';
                                } else {
                                    feedbackEl.innerHTML = '<span class="incorrect-highlight">오답!</span> 정답은 ' + answer + '번 💪';
                                    if(explanationEl) explanationEl.className = 'explanation show';
                                }
                            }
                            if(explanationEl.classList.contains('show')) {
                                try {
                                    const decodedExplanation = decodeURIComponent(atob(item.dataset.explanation));
                                    if (decodedExplanation.trim()) explanationEl.innerHTML = '<strong>해설:</strong> ' + decodedExplanation;
                                } catch(err) {}
                            }
                        } else if (explainable) {
                            explanationPopup.innerHTML = explainable.dataset.explanation + '<button class="popup-close-btn" title="닫기">&times;</button>';
                            const rect = explainable.getBoundingClientRect();
                            explanationPopup.style.top = (rect.bottom + window.scrollY + 12) + 'px';
                            explanationPopup.style.left = (rect.left + window.scrollX) + 'px';
                            explanationPopup.classList.add('show');
                            e.stopPropagation();
                        }
                    }
                }
            });
            document.addEventListener('click', e => { 
                if (!e.target.closest('.explainable') && !e.target.closest('.explanation-popup')) {
                    explanationPopup.classList.remove('show');
                }
            });

            explanationPopup.addEventListener('click', e => {
                if (e.target.classList.contains('popup-close-btn')) {
                    explanationPopup.classList.remove('show');
                }
            });

            initializeAllInteractiveBlocks();
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise();
            }

            adjustBlankInputWidths(document.body);
        });
        </script>
                </body>
                </html>
